##
# This code was generated by
# \ / _    _  _|   _  _
#  | (_)\/(_)(_|\/| |(/_  v1.0.0
#       /       /

module Twilio
  module REST
    ##
    # A client for accessing the Twilio API.
    class Client
      attr_accessor :http_client, :username, :password, :account_sid, :auth_token, :region

      ##
      # Initializes the Twilio Client
      def initialize(username=nil, password=nil, account_sid=nil, region=nil, http_client=Twilio::HTTP::Client.new)
        @username = username || Twilio.account_sid
        @password = password || Twilio.auth_token
        @region = region
        @account_sid = account_sid || @username
        @auth_token = @password
        @auth = [@username, @password]
        @http_client = http_client

        # Domains
        @accounts = nil
        @api = nil
        @chat = nil
        @fax = nil
        @ip_messaging = nil
        @lookups = nil
        @monitor = nil
        @notify = nil
        @preview = nil
        @pricing = nil
        @taskrouter = nil
        @trunking = nil
        @video = nil
        @messaging = nil
        @wireless = nil
        @sync = nil
      end

      ##
      # Makes a request to the Twilio API using the configured http client
      # Authentication information is automatically added if none is provided
      def request(host, port, method, uri, params={}, data={}, headers={}, auth=nil, timeout=nil)
        auth ||= @auth

        headers['User-Agent'] = "twilio-ruby/#{Twilio::VERSION}" +
                                " (#{RUBY_ENGINE}/#{RUBY_PLATFORM}" +
                                " #{RUBY_VERSION}-p#{RUBY_PATCHLEVEL})"
        headers['Accept-Charset'] = 'utf-8'

        if method == 'POST' && !headers['Content-Type']
          headers['Content-Type'] = 'application/x-www-form-urlencoded'
        end

        unless headers['Accept']
          headers['Accept'] = 'application/json'
        end

        if !region.nil?
            head, tail  = uri.split('.', 2)
            if !tail.start_with?(region)
                uri = [head, region, tail].join('.')
            end
        end

        @http_client.request(
          host,
          port,
          method,
          uri,
          params,
          data,
          headers,
          auth,
          timeout
        )
      end

      ##
      # Access the Accounts Twilio Domain
      def accounts
        @accounts ||= Accounts.new self
      end

      ##
      # Access the Api Twilio Domain
      def api
        @api ||= Api.new self
      end

      ##
      # Access the Chat Twilio Domain
      def chat
        @chat ||= Chat.new self
      end

      ##
      # Access the Fax Twilio Domain
      def fax
        @fax ||= Fax.new self
      end

      ##
      # Access the IpMessaging Twilio Domain
      def ip_messaging
        @ip_messaging ||= IpMessaging.new self
      end

      ##
      # Access the Lookups Twilio Domain
      def lookups
        @lookups ||= Lookups.new self
      end

      ##
      # Access the Monitor Twilio Domain
      def monitor
        @monitor ||= Monitor.new self
      end

      ##
      # Access the Notify Twilio Domain
      def notify
        @notify ||= Notify.new self
      end

      ##
      # Access the Preview Twilio Domain
      def preview
        @preview ||= Preview.new self
      end

      ##
      # Access the Pricing Twilio Domain
      def pricing
        @pricing ||= Pricing.new self
      end

      ##
      # Access the Taskrouter Twilio Domain
      def taskrouter
        @taskrouter ||= Taskrouter.new self
      end

      ##
      # Access the Trunking Twilio Domain
      def trunking
        @trunking ||= Trunking.new self
      end

      ##
      # Access the Video Twilio Domain
      def video
        @video ||= Video.new self
      end

      ##
      # Access the Messaging Twilio Domain
      def messaging
        @messaging ||= Messaging.new self
      end

      ##
      # Access the Wireless Twilio Domain
      def wireless
        @wireless ||= Wireless.new self
      end

      ##
      # Access the Sync Twilio Domain
      def sync
        @sync ||= Sync.new self
      end

      def addresses(sid=:unset)
        self.api.v2010.account.addresses(sid)
      end

      def applications(sid=:unset)
        self.api.v2010.account.applications(sid)
      end

      def authorized_connect_apps(sid=:unset)
        self.api.v2010.account.authorized_connect_apps(sid)
      end

      def available_phone_numbers(sid=:unset)
        self.api.v2010.account.available_phone_numbers(sid)
      end

      def calls(sid=:unset)
        self.api.v2010.account.calls(sid)
      end

      def conferences(sid=:unset)
        self.api.v2010.account.conferences(sid)
      end

      def connect_apps(sid=:unset)
        self.api.v2010.account.connect_apps(sid)
      end

      def incoming_phone_numbers(sid=:unset)
        self.api.v2010.account.incoming_phone_numbers(sid)
      end

      def keys(sid=:unset)
        self.api.v2010.account.keys(sid)
      end

      def messages(sid=:unset)
        self.api.v2010.account.messages(sid)
      end

      def new_keys
        self.api.v2010.account.new_keys
      end

      def new_signing_keys
        self.api.v2010.account.new_signing_keys
      end

      def notifications(sid=:unset)
        self.api.v2010.account.notifications(sid)
      end

      def outgoing_caller_ids(sid=:unset)
        self.api.v2010.account.outgoing_caller_ids(sid)
      end

      def queues(sid=:unset)
        self.api.v2010.account.queues(sid)
      end

      def recordings(sid=:unset)
        self.api.v2010.account.recordings(sid)
      end

      def signing_keys(sid=:unset)
        self.api.v2010.account.signing_keys(sid)
      end

      def sip
        self.api.v2010.account.sip
      end

      def short_codes(sid=:unset)
        self.api.v2010.account.short_codes(sid)
      end

      def tokens
        self.api.v2010.account.tokens
      end

      def transcriptions(sid=:unset)
        self.api.v2010.account.transcriptions(sid)
      end

      def usage
        self.api.v2010.account.usage
      end

      def validation_requests
        self.api.v2010.account.validation_requests
      end

      ##
      # Provide a user friendly representation
      def to_s
        "#<Twilio::REST::Client #{@account_sid}>"
      end
    end
  end
end